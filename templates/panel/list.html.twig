<div id="listing">

<div id="error"></div>

<table>
    <thead>
        <tr>
            <td>Name</td>
            <td>Size</td>
        </tr>
    </thead>
    <tbody>
{% for file in files %}
    <tr>
        <td>
            {% if file[2] == -1 %}
                <a href="" hx-target="#listing" hx-swap="outerHTML" hx-get="{{ path('file_get', {'id': file[0]}) }}">{{ file[1] }}</a>
            {% else %}
                <a href="{{ path('file_get', {'id': file[0]}) }}">{{ file[1] }}</a>
            {% endif %}
        </td>
        <td>{{ file[2] == -1 ? '[DIR]' : file[2] }}</td>
        <td>
            {% if not loop.first or is_root_dir %}
                <button hx-swap="outerHTML" hx-target="#listing" hx-target-4*="#error" hx-delete="{{ path('file_delete', {'id': file[0]}) }}">Delete</button>
            {% endif %}
        </td>
    </tr>
{% endfor %}
    </tbody>
</table>

<form
	hx-post="{{ path('file_mkdir', {id: root_inode }) }}"
	hx-target="#listing"
	hx-swap="outerHTML"
>
	<input type="text" name="name">
	<button type="submit">mkdir</button>
</form>

{{ render(path('file_create', {id: root_inode})) }}

</div>
